{
    "type": "object",
    "required": ["leaf", "rr", "loopback", "fabric_cabling"],
    "properties": {
        "leaf": {
            "anyOf": [
                {
                    "type": "object",
                    "required": ["hostname", "amount", "asn_base"],
                    "properties": {
                        "hostname": {
                            "type": "string"
                        },
                        "amount": {
                            "type": "number"
                        },
                        "asn_base": {
                            "type": "number",
                            "minimum": 1,
                            "maximum": 4294967294
                        },
                        "software_version": {
                            "type": "string",
                            "pattern": "^\\d+\\.\\d+\\.\\d+$"
                        },
                        "hardware": {
                            "type": "string",
                            "enum": ["IXR_D2", "IXR_D2L", "IXR_D3", "IXR_D3L", "IXR_H2"]
                        }
                    }
                },
                {
                    "type": "object",
                    "required": ["hostname", "node_list", "asn_base"],
                    "properties": {
                        "hostname": {
                            "type": "string"
                        },
                        "node_list": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": ["amount"],
                                "properties": {
                                    "amount": {
                                        "type": "number"
                                    },
                                    "hardware": {
                                        "type": "string",
                                        "enum": ["IXR_D2", "IXR_D2L", "IXR_D3", "IXR_D3L", "IXR_H2"]
                                    }
                                }
                            }
                        },
                        "asn_base": {
                            "type": "number",
                            "minimum": 1,
                            "maximum": 4294967294
                        },
                        "software_version": {
                            "type": "string",
                            "pattern": "^\\d+\\.\\d+\\.\\d+$"
                        }
                    }
                },
                {
                    "type": "object",
                    "properties": {
                        "nodes": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": ["id", "hostname", "asn"],
                                "properties": {
                                    "id": {
                                        "type": "number"
                                    },
                                    "hardware": {
                                        "type": "string",
                                        "enum": ["IXR_D2", "IXR_D2L", "IXR_D3", "IXR_D3L", "IXR_H2"]
                                    },
                                    "hostname": {
                                        "type": "string"
                                    },
                                    "asn": {
                                        "type": "number",
                                        "minimum": 1,
                                        "maximum": 4294967294
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        "spine": {
            "anyOf": [
                {
                    "type": "object",
                    "required": ["hostname", "amount", "asn_base", "hardware"],
                    "properties": {
                        "hostname": {
                            "type": "string"
                        },
                        "amount": {
                            "type": "number"
                        },
                        "asn_base": {
                            "type": "number",
                            "minimum": 1,
                            "maximum": 4294967294
                        },
                        "software_version": {
                            "type": "string",
                            "pattern": "^\\d+\\.\\d+\\.\\d+$"
                        },
                        "hardware": {
                            "type": "string",
                            "enum": ["IXR_D2", "IXR_D2L", "IXR_D3", "IXR_D3L", "IXR_H2"]
                        }
                    }
                },
                {
                    "type": "object",
                    "required": ["hostname", "node_list", "asn_base"],
                    "properties": {
                        "hostname": {
                            "type": "string"
                        },
                        "node_list": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": ["amount", "hardware"],
                                "properties": {
                                    "amount": {
                                        "type": "number"
                                    },
                                    "hardware": {
                                        "type": "string",
                                        "enum": ["IXR_D2", "IXR_D2L", "IXR_D3", "IXR_D3L", "IXR_H2"]
                                    }
                                }
                            }
                        },
                        "asn_base": {
                            "type": "number",
                            "minimum": 1,
                            "maximum": 4294967294
                        },
                        "software_version": {
                            "type": "string",
                            "pattern": "^\\d+\\.\\d+\\.\\d+$"
                        }
                    }
                },
                {
                    "type": "object",
                    "properties": {
                        "nodes": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "required": ["id", "hostname", "asn", "hardware"],
                                "properties": {
                                    "id": {
                                        "type": "number"
                                    },
                                    "hardware": {
                                        "type": "string",
                                        "enum": ["IXR_D2", "IXR_D2L", "IXR_D3", "IXR_D3L", "IXR_H2"]
                                    },
                                    "hostname": {
                                        "type": "string"
                                    },
                                    "asn": {
                                        "type": "number",
                                        "minimum": 1,
                                        "maximum": 4294967294
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        "rr": {
            "type": "object",
            "required": ["asn_base", "location"],
            "properties": {
                "location": {
                    "type": "string",
                    "enum": ["spine", "external"]
                },
                "asn_base": {
                    "type": "number",
                    "minimum": 1,
                    "maximum": 4294967294
                }
            }
        },
        "p2p": {
            "type": "array",
            "items": {
                "type": "string",
                "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/(?:3[0-2]|[0-2]?[0-9])$"
            }
        },
        "loopback": {
            "oneOf": [
                {
                    "type": "string",
                    "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/(?:3[0-2]|[0-2]?[0-9])$"
                },
                {
                    "type": "array",
                    "items": {
                        "oneOf": [
                            {
                                "type": "object",
                                "required": ["role", "start"],
                                "properties" : {
                                    "role": {
                                        "type": "string",
                                        "enum": ["leaf", "borderleaf", "spine", "superspine", "dcgw"]
                                    },
                                    "start": {
                                        "type": "string",
                                        "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
                                    }
                                }
                            },
                            {
                                "type": "object",
                                "required": ["node", "system"],
                                "properties" : {
                                    "node": {
                                        "type": "string"
                                    },
                                    "system": {
                                        "type": "string",
                                        "pattern": "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
                                    }
                                }
                            }
                        ]
                    }
                }
            ]
        },
        "fabric_cabling": {
            "type": "array",
            "items": {
                "anyOf": [
                    {
                        "type": "object",
                        "required": ["local_device", "uplink", "remote_device", "downlink"],
                        "properties": {
                            "local_device": {
                                "type": "string"
                            },
                            "uplink": {
                                "type": "string",
                                "pattern": "^\\d+/\\d+$"
                            },
                            "remote_device": {
                                "type": "string"
                            },
                            "downlink": {
                                "type": "string",
                                "pattern": "^\\d+/\\d+$"
                            },
                            "speed": {
                                "type": "string",
                                "enum": ["100G", "50G", "40G", "25G", "10G", "1G"]
                            },
                            "fec": {
                                "type": "string",
                                "enum": ["base-r", "disabled", "rs-108", "rs-528"]
                            },
                            "ddm": {
                                "type": "bool"
                            },
                            "lldp": {
                                "type": "bool"
                            },
                            "admin_state": {
                                "type": "string",
                                "enum": ["enable", "disable"]
                            }
                        }
                    },
                    {
                        "type": "object",
                        "required": ["endpoints"],
                        "properties": {
                            "endpoints": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "pattern": "^.*:e\\d+-\\d+$"
                                }
                            }
                        }
                    }
                ]
            }
        }
    }
}
