---

- name: Replace JSON-RPC-server MGMT instance
  gather_facts: false
  hosts: clab-evpn01-leaf2
  vars:
    contact: Ansible
  tasks:

    - name: Replace JSON-RPC-server MGMT instance
      nokia_ni_cnpi.srlinux.srl_config:
        replace:
        - path: /system/json-rpc-server/network-instance[name=mgmt]
          value:
            name: mgmt
            http:
              admin-state: disable
            https:
              admin-state: enable
              tls-profile: clab-profile
        #backup: yes
      register: replcjsonrpc

    - name: Get diff
      debug:
        msg: "{{ replcjsonrpc.diff | default([]) | list }}"

